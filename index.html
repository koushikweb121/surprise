<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sumaiya & Rimon ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #ff69b4;
            --secondary-color: #ff94c2;
            --accent-color: #ffd1dc;
            --text-color: #4a4a4a;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            padding-top: 120px;
            background: linear-gradient(135deg, #fff0f7 0%, #ffe6f2 100%);
            color: var(--text-color);
        }

        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--primary-color);
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255,105,180,0.3);
            z-index: 1000;
        }

        .header h1 {
            font-family: 'Pacifico', cursive;
            margin: 0;
            font-size: 2.5rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .user-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(255,105,180,0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .user-section:hover {
            transform: translateY(-5px);
        }

        textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--accent-color);
            border-radius: 15px;
            resize: vertical;
            margin-bottom: 1rem;
            font-family: 'Quicksand', sans-serif;
            transition: all 0.3s ease;
        }

        textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(255,105,180,0.2);
            outline: none;
        }

        button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        button:hover {
            background: #ff1493;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255,20,147,0.3);
        }

        .post {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .comment {
            margin: 1rem 0;
            padding: 1rem;
            background: #fff8fb;
            border-radius: 10px;
            border-left: 3px solid var(--secondary-color);
        }

        .timestamp {
            font-size: 0.85rem;
            color: #999;
            margin-top: 0.5rem;
        }

        .comment-input {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .comment-input input {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid var(--accent-color);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .action-buttons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: none;
            gap: 8px;
        }

        .post:hover .action-buttons,
        .comment:hover .action-buttons {
            display: flex;
        }

        .edit-btn, .delete-btn {
            cursor: pointer;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            color: #ff8c00;
        }

        .delete-btn:hover {
            color: #ff0000;
        }

        .edit-textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h2> visit this link , if not work then I am not there. wait for new link.
https://511c-103-138-125-193.ngrok-free.app
<h2>
        <div class="memory-counter">
            <i class="fas fa-heart"></i>
            <span id="memoryCount">0 Memories</span>
        </div>
    </div>

    <div class="container">
        <!-- Sumaiya's Section -->
        <div class="user-section">
            <h2><i class="fas fa-female"></i> Sumaiya ‚úç</h2>
            <textarea id="sumaiya-post" placeholder="Pen your heartfelt thought... üå∏" rows="3"></textarea>
            <button onclick="addPost('sumaiya')"><i class="fas fa-feather"></i> Share Thought</button>
            <div id="sumaiya-posts" class="posts"></div>
        </div>

        <!-- Rimon's Section -->
        <div class="user-section">
            <h2><i class="fas fa-male"></i> Rimon ‚úç</h2>
            <textarea id="Rimon-post" placeholder="Write your loving message... üíå" rows="3"></textarea>
            <button onclick="addPost('Rimon')"><i class="fas fa-feather"></i> Share Thought</button>
            <div id="Rimon-posts" class="posts"></div>
        </div>
    </div>

    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD4QLTW79IGTPWO8HygguXu50Lc0e-u0M0",
            authDomain: "sumaiya-rimon.firebaseapp.com",
            projectId: "sumaiya-rimon",
            storageBucket: "sumaiya-rimon.firebasestorage.app",
            messagingSenderId: "228589569080",
            appId: "1:228589569080:web:ac0df065f75b63868452cd",
            measurementId: "G-NNQLB5J0YB"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Fixed Post Creation
        async function addPost(user) {
            const postText = document.getElementById(`${user}-post`).value;
            if (postText) {
                try {
                    await db.collection("posts").add({
                        user: user,
                        text: postText,
                        timestamp: new Date().toLocaleString()
                    });
                    document.getElementById(`${user}-post`).value = "";
                } catch (error) {
                    console.error("Error adding post:", error);
                }
            }
        }

        // Fixed Comment System
        async function addComment(button, postId) {
            const commentInput = button.previousElementSibling;
            const commentText = commentInput.value;
            if (commentText) {
                try {
                    await db.collection("comments").add({
                        postId: postId,
                        text: commentText,
                        timestamp: new Date().toLocaleString()
                    });
                    commentInput.value = "";
                } catch (error) {
                    console.error("Error adding comment:", error);
                }
            }
        }

        // Real-time Post Loader
        db.collection("posts").onSnapshot((snapshot) => {
            document.getElementById("sumaiya-posts").innerHTML = "";
            document.getElementById("Rimon-posts").innerHTML = "";

            snapshot.forEach((doc) => {
                const post = doc.data();
                const postDiv = document.createElement('div');
                postDiv.className = 'post';
                postDiv.innerHTML = `
                    <div class="action-buttons">
                        <i class="fas fa-trash delete-btn" onclick="deletePost('${doc.id}')"></i>
                    </div>
                    <div class="thought">üíñ ${post.text}</div>
                    <div class="timestamp">üìÖ ${post.timestamp}</div>
                    <div class="comments" id="comments-${doc.id}"></div>
                    <div class="comment-input">
                        <input type="text" placeholder="Add a sweet comment... üí¨">
                        <button onclick="addComment(this, '${doc.id}')">
                            <i class="fas fa-comment-dots"></i> Comment
                        </button>
                    </div>
                `;
                document.getElementById(`${post.user}-posts`).appendChild(postDiv);
            });
        });

        // Real-time Comment Loader
        db.collection("comments").onSnapshot((snapshot) => {
            snapshot.docChanges().forEach((change) => {
                if (change.type === "added") {
                    const comment = change.doc.data();
                    const commentDiv = document.createElement('div');
                    commentDiv.className = 'comment';
                    commentDiv.innerHTML = `
                        <div class="action-buttons">
                            <i class="fas fa-trash delete-btn" onclick="deleteComment('${change.doc.id}')"></i>
                        </div>
                        <span>üí¨ ${comment.text}</span>
                        <div class="timestamp">üìÖ ${comment.timestamp}</div>
                    `;
                    document.getElementById(`comments-${comment.postId}`).appendChild(commentDiv);
                }
            });
        });

        // Delete Functions
        async function deletePost(postId) {
            if (confirm("Delete this post?")) await db.collection("posts").doc(postId).delete();
        }

        async function deleteComment(commentId) {
            if (confirm("Delete this comment?")) await db.collection("comments").doc(commentId).delete();
        }
    </script>
</body>
</html>
